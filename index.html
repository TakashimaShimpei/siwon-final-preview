<!doctype html><html lang="ja"><head>
<link rel="icon" href="/siwon-final-preview/favicon.ico" type="image/x-icon">
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; frame-src 'self'; connect-src 'self'">



<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Siwon 20250807 (gh-pages)</title>
<style id="siwon-css-v7">
/* 選択式UIは初期描画から不可視（後で恒久削除） */
input[type=radio],input[type=checkbox],select,option{display:none!important;visibility:hidden!important}
[role='radiogroup'],.options,.option,.choices,.choice,[data-choice],[data-options]{display:none!important;visibility:hidden!important}
/* /警告の一般的なUIを不可視 */
[role='alert'],.alert,.error,.errors,.warning,.toast,.snackbar{display:none!important;visibility:hidden!important}
</style>
</head><body>
<h1>Siwon 20250807 (gh-pages)</h1>
<p>このページは <strong>gh-pages</strong> ブランチから配信されます。</p>
<script>(function(){const MARK="Siwon 20250807 / 2025-08-19 r6-inline";
try{if(!location.search.includes("_v=")){const u=new URL(location.href);u.searchParams.set("_v","2025.08.19-r6");location.replace(u.toString());return;}}catch(e){}
const BADGE_TEXT=MARK,WELCOME="ようこそ。思考力＆AIスキル養成ツール（ベーシック版）へ！";
let shown=false;function ensureBadge(){if(document.getElementById("siwon-badge"))return;const b=document.createElement("div");b.id="siwon-badge";b.textContent=BADGE_TEXT;b.style.cssText="position:fixed;right:8px;bottom:8px;padding:4px 8px;border:1px solid #ccc;background:#fff;font-size:12px;border-radius:6px;opacity:.9;z-index:9999";document.body.appendChild(b);}
function focusId(){const c=document.querySelector("[name=id],#id,#user-id,input[type=text],input[autocomplete='username']"); if(c){try{c.focus();}catch(e){}}}
function showWelcomeOnce(){if(shown)return; shown=true; const d=document.createElement("div"); d.textContent=WELCOME; d.setAttribute("role","status"); d.style.cssText="position:fixed;left:50%;transform:translateX(-50%);top:16px;background:#111;color:#fff;padding:10px 14px;border-radius:10px;box-shadow:0 4px 16px rgba(0,0,0,.25);z-index:10000;font-size:14px"; document.body.appendChild(d); setTimeout(()=>{d.remove();focusId();},1400);}
function boot(){
    autoStartAfterId();ensureBadge();window.addEventListener("keydown",(e)=>{if((e.key==="1"||e.code==="Digit1")&&!e.altKey&&!e.ctrlKey&&!e.metaKey){showWelcomeOnce();}});}
if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",boot);}else{boot();})();</script>
<script>(function(){
  const MARK="Siwon 20250807 / 2025-08-19 md-minimal";
  // 既存の歓迎表示（r5/r6 の showWelcomeOnce）を化
  try{ window.showWelcomeOnce = function(){} }catch(e){}

  // 起動時は「モードIDをどうぞ」だけを一瞬表示
  function minimalBanner(){
    try{
      // 既存の長文バナーらしき要素を消す（保守的にテキスト一致）
      document.querySelectorAll("*").forEach(el=>{
        const t = (el.innerText||"").trim();
        if(/ようこそ|思考力.?AIスキル養成ツール|ベーシック版/.test(t)) el.innerHTML="";
      });
      // 最小バナー
      if(!document.getElementById("siwon-minimal-banner")){
        const d=document.createElement("div");
        d.id="siwon-minimal-banner";
        d.textContent="モードIDをどうぞ";
        d.style.cssText="position:fixed;left:50%;transform:translateX(-50%);top:12px;background:#111;color:#fff;padding:8px 12px;border-radius:10px;box-shadow:0 4px 16px rgba(0,0,0,.25);z-index:10000;font-size:14px";
        document.body.appendChild(d);
        setTimeout(()=>{try{d.remove()}catch(e){}},1500);
      }
      // ID入力欄にフォーカス（名称は広めに探索）
      const cand = document.querySelector("[name=id],#id,#user-id,input[autocomplete='username'],input[type='text']");
      if(cand){ try{cand.focus()}catch(e){} }
    }catch(e){}
  }

  // DOMロード時に実行
  if(document.readyState==="loading"){
    document.addEventListener("DOMContentLoaded", minimalBanner);
  }else{
    minimalBanner();
  }

  // 後から長文が出ても消す（保守的フィルタ）
  new MutationObserver(()=>{ try{
    document.querySelectorAll("*").forEach(el=>{
      const t=(el.innerText||"").trim();
      if(/ようこそ|思考力.?AIスキル養成ツール|ベーシック版/.test(t)) el.innerHTML="";
    });
  }catch(e){} }).observe(document.documentElement,{subtree:true,childList:true,characterData:true});
})();</script>
<script>(function(){
  const MARK="Siwon 20250807 / 2025-08-19 md-minimal-v2";
  // 既存バナー/バッジ/ガードを停止・除去
  try{ window.showWelcomeOnce=function(){} }catch(e){}
  try{ const b=document.getElementById("siwon-badge"); if(b) b.remove(); }catch(e){}
  try{ document.querySelectorAll('script[src*="patch/boot_guard.js"]').forEach(s=>s.remove()); }catch(e){}

  const NG=/\b(|||||||||)\b/;
  function zap(root){
    root=root||document.body;
    // テキストを見て要素ごと除去（ボタン/ラベル/セクション想定）
    root.querySelectorAll("*").forEach(el=>{
      try{
        if(!el || el===document.body || el===document.documentElement) return;
        const t=(el.innerText||el.textContent||"").replace(/\s+/g,"").slice(0,80);
        if(NG.test(t)){
          el.remove();
        }
      }catch(_){}
    });
    // ラジオ/セレクトなども念のため
    root.querySelectorAll("select,option,button,label,[role='radiogroup'],input[type=radio]").forEach(el=>{
      try{
        const t=(el.innerText||el.textContent||el.value||"").replace(/\s+/g,"");
        if(NG.test(t)) el.remove();
      }catch(_){}
    });
  }

  function minimalBanner(){
    try{
      // 既存の「ようこそ…」系の長文を消す
      document.querySelectorAll("*").forEach(el=>{
        const t=(el.innerText||"").trim();
        if(/ようこそ|思考力.?AIスキル養成ツール|ベーシック版/.test(t)) el.innerHTML="";
      });
      // 最小バナー（1.5秒だけ）
      if(!document.getElementById("siwon-minimal-banner")){
        const d=document.createElement("div");
        d.id="siwon-minimal-banner";
        d.textContent="モードIDをどうぞ";
        d.style.cssText="position:fixed;left:50%;transform:translateX(-50%);top:12px;background:#111;color:#fff;padding:8px 12px;border-radius:10px;box-shadow:0 4px 16px rgba(0,0,0,.25);z-index:10000;font-size:14px";
        document.body.appendChild(d);
        setTimeout(()=>{try{d.remove()}catch(_){}} ,1500);
      }
      // ID入力欄へフォーカス（候補を広めに）
      const cand=document.querySelector("[name=id],#id,#user-id,input[autocomplete='username'],input[type='text']");
      if(cand){ try{cand.focus()}catch(_){ } }
    }catch(_){}
  }

  // 1) 起動直後：UI除去＋最小表示
  function boot(){
    autoStartAfterId(); zap(document.body); minimalBanner(); }

  if(document.readyState==="loading"){ document.addEventListener("DOMContentLoaded",boot); }
  else { boot(); }

  // 2) 後から出てくるUIも即除去
  new MutationObserver(muts=>{
    let need=false;
    for(const m of muts){
      if(m.addedNodes && m.addedNodes.length){ need=true; break; }
      if(m.type==="characterData"){ need=true; break; }
    }
    if(need){ zap(document.body); }
  }).observe(document.documentElement,{subtree:true,childList:true,characterData:true});

  // 3) CDN回避（パラメタが無ければ付け替え） ※一度だけ
  try{
    if(!location.search.includes("_v=")){
      const u=new URL(location.href);
      u.searchParams.set("_v","md-minimal-v2");
      history.replaceState(null,"",u.toString()); // reloadはせずURLだけ更新
    }
  }catch(_){}
})();</script>
<script>(function(){
  const MARK="Siwon 20250807 / 2025-08-19 md-minimal-v3";

  // (1) 既存の歓迎/UIは v2 と同様に抑止
  try{ window.showWelcomeOnce=function(){} }catch(e){}
  try{ const b=document.getElementById("siwon-badge"); if(b) b.remove(); }catch(e){}
  try{ document.querySelectorAll('script[src*="patch/boot_guard.js"]').forEach(s=>s.remove()); }catch(e){}

  // (2) 選択式UIの徹底除去（radio/checkbox/select/option、選択肢ボタン群っぽいdiv等）
  const NGWORD=/\b(||||||||||選択|択一|複数選択)\b/;
  function nukeChoices(root){
    root = root || document.body;

    // フォーム入力系（選択式）
    root.querySelectorAll("input[type=radio],input[type=checkbox],select,option").forEach(el=>{ try{ el.closest("label,li,div,section,fieldset,form")?.remove(); el.remove(); }catch(_){}});

    // 明らかな選択肢ボタン群（.option, .choice, data-choice 等の命名/role）
    root.querySelectorAll("[role='radiogroup'],[role='group'],.option,.options,.choice,.choices,[data-choice],[data-options]")
        .forEach(el=>{ try{ el.remove(); }catch(_){}});

    // 文言での検出（ボタン/ラベル/項目行）
    root.querySelectorAll("*").forEach(el=>{
      try{
        if(!el || el===document.body || el===document.documentElement) return;
        const t=(el.innerText||el.textContent||"").replace(/\s+/g,"").slice(0,100);
        if(NGWORD.test(t)){
          // 選択肢の親っぽければまとめて除去
          const parent = el.closest("li,div,section,fieldset,form") || el;
          parent.remove();
        }
      }catch(_){}
    });
  }

  // (3) 最小バナー「モードIDをどうぞ」＋自由入力へフォーカス
  function minimalBanner(){
    try{
      document.querySelectorAll("*").forEach(el=>{
        const t=(el.innerText||"").trim();
        if(/ようこそ|思考力.?AIスキル養成ツール|ベーシック版/.test(t)) el.innerHTML="";
      });
      if(!document.getElementById("siwon-minimal-banner")){
        const d=document.createElement("div");
        d.id="siwon-minimal-banner";
        d.textContent="モードIDをどうぞ";
        d.style.cssText="position:fixed;left:50%;transform:translateX(-50%);top:12px;background:#111;color:#fff;padding:8px 12px;border-radius:10px;box-shadow:0 4px 16px rgba(0,0,0,.25);z-index:10000;font-size:14px";
        document.body.appendChild(d);
        setTimeout(()=>{try{d.remove()}catch(_){}} ,1500);
      }
      // 入力はテキスト/textareaに限定して誘導
      const cand = document.querySelector("textarea,[name=id],#id,#user-id,input[type='text'],input[autocomplete='username']");
      if(cand){ try{ cand.removeAttribute("disabled"); cand.focus(); }catch(_){} }
    }catch(_){}
  }

  // (4) 起動時＆動的変化の両方で適用
  function boot(){
    autoStartAfterId(); nukeChoices(document.body); minimalBanner(); }
  if(document.readyState==="loading"){ document.addEventListener("DOMContentLoaded", boot); } else { boot(); }

  new MutationObserver(m=>{
    let need=false;
    for(const x of m){ if((x.addedNodes&&x.addedNodes.length)||x.type==="characterData"){ need=true; break; } }
    if(need){ nukeChoices(document.body); }
  }).observe(document.documentElement,{subtree:true,childList:true,characterData:true});

  // (5) URLにバージョンタグ（キャッシュ回避用）を付与（リロードはしない）
  try{
    if(!location.search.includes("_v=")){
      const u=new URL(location.href); u.searchParams.set("_v","md-minimal-v3");
      history.replaceState(null,"",u.toString());
    }
  }catch(_){}
})();</script>
<script>(function(){
  const MARK="Siwon 20250807 / 2025-08-19 md-minimal-v4";

  // 旧演出の化
  try{ window.showWelcomeOnce=function(){} }catch(e){}
  try{ document.getElementById('siwon-badge')?.remove(); }catch(e){}
  try{ document.querySelectorAll('script[src*="patch/boot_guard.js"]').forEach(s=>s.remove()); }catch(e){}

  // 起動直後に最小バナー
  function minimal(){
    try{
      document.querySelectorAll("*").forEach(el=>{
        const t=(el.innerText||"").trim();
        if(/ようこそ|思考力.?AIスキル養成ツール|ベーシック版/.test(t)) el.innerHTML="";
      });
      if(!document.getElementById("siwon-minimal")){
        const d=document.createElement("div");
        d.id="siwon-minimal";
        d.textContent="モードIDをどうぞ";
        d.style.cssText="position:fixed;left:50%;transform:translateX(-50%);top:12px;background:#111;color:#fff;padding:8px 12px;border-radius:10px;box-shadow:0 4px 16px rgba(0,0,0,.25);z-index:10000;font-size:14px";
        document.body.appendChild(d);
        setTimeout(()=>{try{d.remove()}catch(_){}} ,1200);
      }
      const cand=document.querySelector("textarea,[name=id],#id,#user-id,input[type='text'],input[autocomplete='username']");
      if(cand){ try{cand.removeAttribute('disabled'); cand.focus();}catch(_){ } }
    }catch(_){}
  }

  // 選択式UIの徹底排除（何度でも）
  const SEL = "input[type=radio],input[type=checkbox],select,option,[role='radiogroup'],.options,.option,.choices,.choice,[data-choice],[data-options]";
  function nuke(){
    try{
      document.querySelectorAll(SEL).forEach(el=>{
        try{
          const host = el.closest("label,li,div,section,fieldset,form")||el;
          host.remove();
        }catch(_){}
      });
    }catch(_){}
  }

  function boot(){
    autoStartAfterId(); nuke(); minimal(); }
  if(document.readyState==="loading"){ document.addEventListener("DOMContentLoaded", boot); } else { boot(); }

  new MutationObserver(()=>{ nuke(); }).observe(document.documentElement,{subtree:true,childList:true,characterData:true});

  try{
    if(!location.search.includes("_v=")){
      const u=new URL(location.href); u.searchParams.set("_v","md-minimal-v4");
      history.replaceState(null,"",u.toString());
    }
  }catch(_){}
})();</script>
<script>(function(){
  const MARK="Siwon 20250807 / 2025-08-19 md-minimal-v5";

  // 旧演出の化
  try{window.showWelcomeOnce=function(){};}catch(_){}
  try{document.getElementById('siwon-badge')?.remove();}catch(_){}
  try{document.querySelectorAll('script[src*="patch/boot_guard.js"]').forEach(s=>s.remove());}catch(_){}

  // 最小バナー & ID フォーカス
  function minimal(){
    try{
      document.querySelectorAll("*").forEach(el=>{
        const t=(el.innerText||"").trim();
        if(/ようこそ|思考力.?AIスキル養成ツール|ベーシック版/.test(t)) el.innerHTML="";
      });
      if(!document.getElementById("siwon-minimal")){
        const d=document.createElement("div");
        d.id="siwon-minimal";
        d.textContent="モードIDをどうぞ";
        d.style.cssText="position:fixed;left:50%;transform:translateX(-50%);top:12px;background:#111;color:#fff;padding:8px 12px;border-radius:10px;box-shadow:0 4px 16px rgba(0,0,0,.25);z-index:10000;font-size:14px";
        document.body.appendChild(d); setTimeout(()=>{try{d.remove()}catch(_){}},1000);
      }
      const idCand=document.querySelector("textarea,[name=id],#id,#user-id,input[type='text'],input[autocomplete='username']");
      if(idCand){ try{idCand.removeAttribute('disabled'); idCand.focus();}catch(_){} }
    }catch(_){}
  }

  // 深掘り掃除（ShadowRoot/iframe 同一オリジンも走査）
  const NG_TXT=/|||||||||||/;
  const SEL = "input[type=radio],input[type=checkbox],select,option,[role='radiogroup'],.options,.option,.choices,.choice,[data-choice],[data-options]";
  function zapRoot(root){
    if(!root) return;
    try{
      // テキストにNGを含む塊は丸ごと削除
      root.querySelectorAll("*").forEach(el=>{
        try{
          if(!el || el===document.body || el===document.documentElement) return;
          const t=(el.innerText||el.textContent||"").replace(/\s+/g,"");
          if(NG_TXT.test(t)) el.remove();
        }catch(_){}
      });
      // 選択式UIの一括削除
      root.querySelectorAll(SEL).forEach(el=>{
        try{ (el.closest("label,li,div,section,fieldset,form")||el).remove(); }catch(_){}
      });
      // Shadow DOM
      root.querySelectorAll("*").forEach(el=>{
        if(el.shadowRoot){ zapRoot(el.shadowRoot); }
      });
      // 同一オリジンの iframe
      root.querySelectorAll("iframe").forEach(f=>{
        try{ if(f.contentDocument){ zapRoot(f.contentDocument); } }catch(_){}
      });
    }catch(_){}
  }

  // 自由記述のみの回答UIを確保（なければ自動挿入）
  function ensureFreeForm(){
    try{
      if(document.querySelector("textarea[name='answer'], textarea.siwon-freeform")) return;
      const ta=document.createElement("textarea");
      ta.name="answer"; ta.className="siwon-freeform";
      ta.placeholder="ここに回答を1文で入力";
      ta.style.cssText="width:96%;max-width:900px;height:120px;margin:16px auto;display:block;padding:10px;border:1px solid #ccc;border-radius:8px;font-size:14px";
      (document.body||document.documentElement).appendChild(ta);
      ta.focus();
    }catch(_){}
  }

  // 開始可否ダイアログ／確認ボタンを自動スキップ
  function autoStart(){
    try{
      // “開始”系ボタンを見つけて一度だけ押す
      const btn = document.querySelector("[data-trigger='start'], button.start, .start, button, a");
      if(btn){
        const txt=((btn.innerText||btn.textContent||"")+ (btn.getAttribute('aria-label')||'')).trim();
        if(/開始|Start|BEGIN/i.test(txt)){ try{btn.click();}catch(_){} }
      }
      // 典型的なモーダルを消す
      document.querySelectorAll(".modal,.dialog,[role='dialog']").forEach(d=>{
        const t=(d.innerText||"").replace(/\s+/g,"");
        if(/|確認|可否/i.test(t)){ try{d.remove();}catch(_){} }
      });
    }catch(_){}
  }

  function boot(){
    autoStartAfterId(); zapRoot(document); minimal(); ensureFreeForm(); autoStart(); }
  if(document.readyState==="loading"){ document.addEventListener("DOMContentLoaded", boot); } else { boot(); }

  // 何度でも後追い掃除
  const obs = new MutationObserver(()=>{ zapRoot(document); ensureFreeForm(); });
  obs.observe(document.documentElement,{subtree:true,childList:true,characterData:true});

  // URLスタンプ（リロード無し）
  try{ if(!location.search.includes("_v=")){ const u=new URL(location.href); u.searchParams.set("_v","md-minimal-v5"); history.replaceState(null,"",u.toString()); } }catch(_){}
})();</script>
<script>(function(){
  const MARK="Siwon 20250807 / 2025-08-19 md-minimal-v6.1";

  // 既存の歓迎/バッジ/ガードの化
  try{window.showWelcomeOnce=function(){};}catch(_){}
  try{document.getElementById('siwon-badge')?.remove();}catch(_){}
  try{document.querySelectorAll('script[src*="patch/boot_guard.js"]').forEach(s=>s.remove());}catch(_){}

  // “長い案内”を常に消す & 最小バナーを1秒だけ
  function minimal(){
    try{
      document.querySelectorAll("*").forEach(el=>{
        const t=(el.innerText||"").trim();
        if(/ようこそ|思考力.?AIスキル養成ツール|ベーシック版/.test(t)) el.innerHTML="";
      });
      if(!document.getElementById("siwon-minimal")){
        const d=document.createElement("div");
        d.id="siwon-minimal";
        d.textContent="モードIDをどうぞ";
        d.style.cssText="position:fixed;left:50%;transform:translateX(-50%);top:12px;background:#111;color:#fff;padding:8px 12px;border-radius:10px;box-shadow:0 4px 16px rgba(0,0,0,.25);z-index:10000;font-size:14px";
        document.body.appendChild(d); setTimeout(()=>{try{d.remove()}catch(_){}},1000);
      }
      const idCand=document.querySelector("textarea,[name=id],#id,#user-id,input[type='text'],input[autocomplete='username']");
      if(idCand){ try{idCand.removeAttribute('disabled'); idCand.focus();}catch(_){} }
    }catch(_){}
  }

  // 選択式UIを恒久的に排除（shadow DOM / 同一オリジン iframe 再帰対応）
  const NG_TXT=/|||||||||||/;
  const SEL="input[type=radio],input[type=checkbox],select,option,[role='radiogroup'],.options,.option,.choices,.choice,[data-choice],[data-options]";

  function zapRoot(root){
    if(!root) return;
    try{
      root.querySelectorAll("*").forEach(el=>{
        try{
          if(!el||el===document.body||el===document.documentElement) return;
          const t=(el.innerText||el.textContent||"").replace(/\s+/g,"");
          if(NG_TXT.test(t)) el.remove();
        }catch(_){}
      });
      root.querySelectorAll(SEL).forEach(el=>{
        try{ (el.closest("label,li,div,section,fieldset,form,table,tr,td")||el).remove(); }catch(_){}
      });
      root.querySelectorAll("*").forEach(el=>{ if(el.shadowRoot){ zapRoot(el.shadowRoot); } });
      root.querySelectorAll("iframe").forEach(f=>{ try{ if(f.contentDocument){ zapRoot(f.contentDocument); } }catch(_){} });
    }catch(_){}
  }

  // 生成系APIをフック：選択式UIの生成自体を抑止
  (function hook(){
    const mk = Element.prototype.appendChild;
    Element.prototype.appendChild = function(n){
      try{
        if(n && (n.matches?.(SEL) || NG_TXT.test((n.innerText||n.textContent||"").replace(/\s+/g,"")))){
          return n; // 採用せず戻す（実質捨てる）
        }
        if(n && n.shadowRoot){ zapRoot(n.shadowRoot); }
      }catch(_){}
      return mk.call(this,n);
    };
    const ib = Element.prototype.insertBefore;
    Element.prototype.insertBefore = function(n,ref){
      try{
        if(n && (n.matches?.(SEL) || NG_TXT.test((n.innerText||n.textContent||"").replace(/\s+/g,"")))){
          return n;
        }
        if(n && n.shadowRoot){ zapRoot(n.shadowRoot); }
      }catch(_){}
      return ib.call(this,n,ref);
    };
  })();

  // 自由記述エリアを必ず用意
  function ensureFreeForm(){
    try{
      if(document.querySelector("textarea[name='answer'], textarea.siwon-freeform")) return;
      const ta=document.createElement("textarea");
      ta.name="answer"; ta.className="siwon-freeform";
      ta.placeholder="ここに回答を1文で入力";
      ta.style.cssText="width:96%;max-width:900px;height:120px;margin:16px auto;display:block;padding:10px;border:1px solid #ccc;border-radius:8px;font-size:14px";
      (document.body||document.documentElement).appendChild(ta);
    }catch(_){}
  }

  // 自動開始妨害を除去
  function clearStartModals(){
    try{
      document.querySelectorAll(".modal,.dialog,[role='dialog']").forEach(d=>{
        const t=(d.innerText||"").replace(/\s+/g,"");
        if(/|確認|可否/i.test(t)){ try{d.remove();}catch(_){ } }
      });
    }catch(_){}
  }

  function boot(){
    autoStartAfterId(); minimal(); zapRoot(document); ensureFreeForm(); clearStartModals(); }
  if(document.readyState==="loading"){ document.addEventListener("DOMContentLoaded", boot); } else { boot(); }

  new MutationObserver(()=>{ zapRoot(document); ensureFreeForm(); clearStartModals(); })
    .observe(document.documentElement,{subtree:true,childList:true,characterData:true});

  try{ if(!location.search.includes("_v=")){ const u=new URL(location.href); u.searchParams.set("_v","md-minimal-v6"); history.replaceState(null,"",u.toString()); } }catch(_){}
})();</script>
<script>(function(){
  const MARK="Siwon 20250807 / 2025-08-19 md-minimal-v7";

  // 1) ブラウザダイアログを化（ユーザーに文言を出さない）
  try{
    window.alert = function(){};
    window.confirm = function(){ return true; };
    window.prompt = function(){ return ""; };
    window.onerror = function(){ return true; }; // 画面上を抑止
  }catch(_){}

  // 2) 既存の歓迎/長文/バッジ/ガードを停止・除去
  try{ window.showWelcomeOnce=function(){}; }catch(_){}
  try{ document.getElementById('siwon-badge')?.remove(); }catch(_){}
  try{ document.querySelectorAll('script[src*="patch/boot_guard.js"]').forEach(s=>s.remove()); }catch(_){}

  // 3) 最小バナーのみ（1秒）
  function minimal(){
    try{
      // 長文を常に消し込み
      document.querySelectorAll("*").forEach(el=>{
        const t=(el.innerText||"").trim();
        if(/ようこそ|思考力.?AIスキル養成ツール|ベーシック版/.test(t)) el.innerHTML="";
      });
      if(!document.getElementById("siwon-minimal")){
        const d=document.createElement("div");
        d.id="siwon-minimal";
        d.textContent="モードIDをどうぞ";
        d.style.cssText="position:fixed;left:50%;transform:translateX(-50%);top:12px;background:#111;color:#fff;padding:8px 12px;border-radius:10px;box-shadow:0 4px 16px rgba(0,0,0,.25);z-index:10000;font-size:14px";
        document.body.appendChild(d); setTimeout(()=>{try{d.remove()}catch(_){}},1000);
      }
      const idCand=document.querySelector("textarea,[name=id],#id,#user-id,input[type='text'],input[autocomplete='username']");
      if(idCand){ try{idCand.removeAttribute('disabled'); idCand.focus();}catch(_){} }
    }catch(_){}
  }

  // 4) UI/選択式/開始可否/文言を恒久除去（影DOM/iframeも再帰）
  const NG_TXT=/|||||||||||||||/i;
  const SEL="input[type=radio],input[type=checkbox],select,option,[role='radiogroup'],.options,.option,.choices,.choice,[data-choice],[data-options],[role='alert'],.alert,.error,.errors,.warning,.toast,.snackbar";
  function zapRoot(root){
    if(!root) return;
    try{
      // テキスト一致で親ごと除去
      root.querySelectorAll("*").forEach(el=>{
        try{
          if(!el||el===document.body||el===document.documentElement) return;
          const t=(el.innerText||el.textContent||"").replace(/\s+/g,"");
          if(NG_TXT.test(t)) (el.closest("label,li,div,section,fieldset,form,table,tr,td,dialog,.modal,.dialog")||el).remove();
        }catch(_){}
      });
      // パターン要素は容器ごと除去
      root.querySelectorAll(SEL).forEach(el=>{
        try{ (el.closest("label,li,div,section,fieldset,form,table,tr,td,dialog,.modal,.dialog")||el).remove(); }catch(_){}
      });
      // 影DOM/同一オリジンiframe 再帰
      root.querySelectorAll("*").forEach(el=>{ if(el.shadowRoot){ zapRoot(el.shadowRoot); } });
      root.querySelectorAll("iframe").forEach(f=>{ try{ if(f.contentDocument){ zapRoot(f.contentDocument); } }catch(_){} });
    }catch(_){}
  }

  // 5) 生成自体をフック（appendChild/insertBefore）
  (function hook(){
    const mk = Element.prototype.appendChild;
    Element.prototype.appendChild = function(n){
      try{
        if(n && (n.matches?.(SEL) || NG_TXT.test((n.innerText||n.textContent||"").replace(/\s+/g,"")))) return n;
        if(n && n.shadowRoot){ zapRoot(n.shadowRoot); }
      }catch(_){}
      return mk.call(this,n);
    };
    const ib = Element.prototype.insertBefore;
    Element.prototype.insertBefore = function(n,ref){
      try{
        if(n && (n.matches?.(SEL) || NG_TXT.test((n.innerText||n.textContent||"").replace(/\s+/g,"")))) return n;
        if(n && n.shadowRoot){ zapRoot(n.shadowRoot); }
      }catch(_){}
      return ib.call(this,n,ref);
    };
  })();

  // 6) 自由記述テキストエリアを確保（必ず1つ用意）
  function ensureFreeForm(){
    try{
      if(document.querySelector("textarea[name='answer'], textarea.siwon-freeform")) return;
      const ta=document.createElement("textarea");
      ta.name="answer"; ta.className="siwon-freeform";
      ta.placeholder="ここに回答を1文で入力";
      ta.style.cssText="width:96%;max-width:900px;height:120px;margin:16px auto;display:block;padding:10px;border:1px solid #ccc;border-radius:8px;font-size:14px";
      (document.body||document.documentElement).appendChild(ta);
    }catch(_){}
  }

  // 7) 開始可否ダイアログを消す & 自動開始（ID入力を合図）
  function clearStartModals(){
    try{
      document.querySelectorAll("dialog,.modal,.dialog,[role='dialog']").forEach(d=>{
        const t=(d.innerText||"").replace(/\s+/g,"");
        if(/|確認|可否/i.test(t)){ try{d.remove();}catch(_){ } }
      });
    }catch(_){}
  }
  function tryStart(){
    try{
      const btn=document.querySelector("[data-trigger='start'], button.start, .start, button, a");
      if(btn){
        const txt=((btn.innerText||btn.textContent||"")+(btn.getAttribute('aria-label')||'')).trim();
        if(/開始|Start|BEGIN/i.test(txt)){ btn.click(); }
      }
    }catch(_){}
  }
  function autoStartAfterId(){
    try{
      const id=document.querySelector("[name=id],#id,#user-id,input[autocomplete='username'],input[type='text']");
      if(!id) return;
      const kick=()=>{ setTimeout(()=>{ clearStartModals(); tryStart(); },80); };
      id.addEventListener("keydown",e=>{ if(e.key==="Enter"){ kick(); }});
      id.addEventListener("change",kick);
      id.addEventListener("blur",kick);
    }catch(_){}
  }

  // 8) 起動
  function boot(){ minimal(); zapRoot(document); ensureFreeForm(); clearStartModals(); autoStartAfterId(); }
  if(document.readyState==="loading"){ document.addEventListener("DOMContentLoaded", boot); } else { boot(); }
  new MutationObserver(()=>{ zapRoot(document); ensureFreeForm(); clearStartModals(); }).observe(document.documentElement,{subtree:true,childList:true,characterData:true});

  // 9) URLにトレース用マーカー付与（リロード無し）
  try{ if(!location.search.includes("_v=")){ const u=new URL(location.href); u.searchParams.set("_v","md-minimal-v7"); history.replaceState(null,"",u.toString()); } }catch(_){}
})();</script>
</body></html>












